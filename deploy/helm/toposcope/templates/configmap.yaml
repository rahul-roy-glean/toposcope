apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "toposcope.fullname" . }}
  labels:
    {{- include "toposcope.labels" . | nindent 4 }}
data:
  PORT: "8080"
  AUTH_MODE: {{ .Values.auth.mode | quote }}
  STORAGE_BACKEND: {{ .Values.storage.backend | quote }}
  LOCAL_STORAGE_PATH: {{ .Values.storage.localPath | quote }}
  {{- if eq .Values.storage.backend "s3" }}
  S3_BUCKET: {{ .Values.storage.s3.bucket | quote }}
  S3_REGION: {{ .Values.storage.s3.region | quote }}
  S3_ENDPOINT: {{ .Values.storage.s3.endpoint | quote }}
  {{- end }}
  {{- if eq .Values.storage.backend "gcs" }}
  GCS_BUCKET: {{ .Values.storage.gcs.bucket | quote }}
  {{- end }}
